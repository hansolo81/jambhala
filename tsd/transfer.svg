<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="353px" preserveAspectRatio="none" style="width:992px;height:353px;background:#FFFFFF;" version="1.1" viewBox="0 0 992 353" width="992px" zoomAndPan="magnify"><defs/><g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="91" x2="91" y1="56.0679" y2="298.01"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="246" x2="246" y1="56.0679" y2="298.01"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="409" x2="409" y1="56.0679" y2="298.01"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="587" x2="587" y1="56.0679" y2="298.01"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="686" x2="686" y1="56.0679" y2="298.01"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="841" x2="841" y1="56.0679" y2="298.01"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="966" x2="966" y1="56.0679" y2="298.01"/><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="173" x="5" y="22"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="159" x="12" y="43.9659">PushNotificationService</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="173" x="5" y="297.01"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="159" x="12" y="318.976">PushNotificationService</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="188" y="51.9659">PushNotification</text><ellipse cx="246.5" cy="21" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="234.5" x2="258.5" y1="35" y2="35"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="188" y="311.976">PushNotification</text><ellipse cx="246.5" cy="332.0779" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="234.5" x2="258.5" y1="346.0779" y2="346.0779"/><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="188" x="315" y="22"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="174" x="322" y="43.9659">TransactionHistoryService</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="188" x="315" y="297.01"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="174" x="322" y="318.976">TransactionHistoryService</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="143" x="513" y="51.9659">MonetaryTransaction</text><ellipse cx="587.5" cy="21" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="575.5" x2="599.5" y1="35" y2="35"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="143" x="513" y="311.976">MonetaryTransaction</text><ellipse cx="587.5" cy="332.0779" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="575.5" x2="599.5" y1="346.0779" y2="346.0779"/><path d="M677,27 L696,27 C701,27 701,41.534 701,41.534 C701,41.534 701,56.0679 696,56.0679 L677,56.0679 C672,56.0679 672,41.534 672,41.534 C672,41.534 672,27 677,27 " fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M696,27 C691,27 691,41.534 691,41.534 C691,56.0679 696,56.0679 696,56.0679 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="9" x="677" y="46.9659">q</text><path d="M677,297.01 L696,297.01 C701,297.01 701,311.544 701,311.544 C701,311.544 701,326.0779 696,326.0779 L677,326.0779 C672,326.0779 672,311.544 672,311.544 C672,311.544 672,297.01 677,297.01 " fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M696,297.01 C691,297.01 691,311.544 691,311.544 C691,326.0779 696,326.0779 696,326.0779 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="9" x="677" y="316.976">q</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119" x="782" y="22"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="789" y="43.9659">TransferService</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119" x="782" y="297.01"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="789" y="318.976">TransferService</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="39" x="947" y="22"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="25" x="954" y="43.9659">ESB</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="39" x="947" y="297.01"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="25" x="954" y="318.976">ESB</text><polygon fill="#181818" points="954.5,85.7739,964.5,89.7739,954.5,93.7739,958.5,89.7739" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="841.5" x2="960.5" y1="89.7739" y2="89.7739"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="848.5" y="83.9649">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="859.5" y="83.9649">doTransfer</text><polygon fill="#181818" points="852.5,117.4799,842.5,121.4799,852.5,125.4799,848.5,121.4799" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="846.5" x2="965.5" y1="121.4799" y2="121.4799"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="858.5" y="115.6709">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="869.5" y="115.6709">&lt;response OK&gt;</text><polygon fill="#181818" points="697.5,149.186,687.5,153.186,697.5,157.186,693.5,153.186" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="691.5" x2="840.5" y1="153.186" y2="153.186"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="703.5" y="147.377">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="714.5" y="147.377">pub &lt;monetarytxn&gt;</text><polygon fill="#181818" points="674.5,180.892,684.5,184.892,674.5,188.892,678.5,184.892" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="91.5" x2="680.5" y1="184.892" y2="184.892"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="98.5" y="179.083">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="109.5" y="179.083">sub &lt;monetarytxn&gt;</text><polygon fill="#181818" points="234.5,212.598,244.5,216.598,234.5,220.598,238.5,216.598" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="91.5" x2="240.5" y1="216.598" y2="216.598"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="98.5" y="210.789">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="27" x="109.5" y="210.789">save</text><polygon fill="#181818" points="674.5,244.304,684.5,248.304,674.5,252.304,678.5,248.304" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="409" x2="680.5" y1="248.304" y2="248.304"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="416" y="242.495">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="427" y="242.495">sub &lt;monetarytxn&gt;</text><polygon fill="#181818" points="575.5,276.01,585.5,280.01,575.5,284.01,579.5,280.01" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="409" x2="581.5" y1="280.01" y2="280.01"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="416" y="274.201">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="27" x="427" y="274.201">save</text><!--MD5=[69accc092fac2fa93f9b3a0dc9e8af95]
@startuml

autonumber
participant PushNotificationService as pns
entity PushNotification as pn
participant TransactionHistoryService as ths
entity MonetaryTransaction as mt
queue q
participant TransferService as ts
participant ESB as esb

ts -> esb: doTransfer
ts <- - esb: <response OK>
ts -> q: pub <monetarytxn>
pns -> q: sub <monetarytxn>
pns -> pn: save
ths -> q: sub <monetarytxn>
ths -> mt: save

@enduml

PlantUML version 1.2022.7(Tue Aug 23 00:01:30 WIB 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>